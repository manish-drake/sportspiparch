<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1113px" preserveAspectRatio="none" style="width:1245px;height:1113px;" version="1.1" viewBox="0 0 1245 1113" width="1245px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ilcb5591d1hn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="166" x="537.75" y="30.6855">Shortest Queue First</text><rect fill="#FFFFFF" filter="url(#f1ilcb5591d1hn)" height="109.4063" style="stroke: #000000; stroke-width: 2.0;" width="588.5" x="643" y="473.8359"/><rect fill="#FFFFFF" filter="url(#f1ilcb5591d1hn)" height="168.4609" style="stroke: #000000; stroke-width: 2.0;" width="260" x="10" y="597.2422"/><rect fill="#FFFFFF" filter="url(#f1ilcb5591d1hn)" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="618" x="139" y="961.8125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="37" x2="37" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="102" x2="102" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="209" x2="209" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="462" x2="462" y1="176.0547" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="586" x2="586" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="700" x2="700" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="794" x2="794" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="890" x2="890" y1="296.3672" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1005" x2="1005" y1="126.25" y2="1027.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1175.5" x2="1175.5" y1="355.9766" y2="1027.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="20" y="123.1738">User</text><ellipse cx="37.5" cy="51.6406" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M37.5,59.6406 L37.5,86.6406 M24.5,67.6406 L50.5,67.6406 M37.5,86.6406 L24.5,101.6406 M37.5,86.6406 L50.5,101.6406 " fill="none" filter="url(#f1ilcb5591d1hn)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="20" y="1041.0488">User</text><ellipse cx="37.5" cy="1054.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M37.5,1062.125 L37.5,1089.125 M24.5,1070.125 L50.5,1070.125 M37.5,1089.125 L24.5,1104.125 M37.5,1089.125 L50.5,1104.125 " fill="none" filter="url(#f1ilcb5591d1hn)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="65" y="123.1738">Tagging UI</text><ellipse cx="102" cy="92.6406" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="98,80.6406,104,75.6406,102,80.6406,104,85.6406,98,80.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="65" y="1041.0488">Tagging UI</text><ellipse cx="102" cy="1060.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="98,1048.125,104,1043.125,102,1048.125,104,1053.125,98,1048.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="149" y="123.1738">Streaming Service</text><ellipse cx="209.5" cy="92.6406" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="205.5,80.6406,211.5,75.6406,209.5,80.6406,211.5,85.6406,205.5,80.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="149" y="1041.0488">Streaming Service</text><ellipse cx="209.5" cy="1060.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="205.5,1048.125,211.5,1043.125,209.5,1048.125,211.5,1053.125,205.5,1048.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="406" y="1041.0488">Priority Algorithm</text><ellipse cx="462.5" cy="1060.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="458.5,1048.125,464.5,1043.125,462.5,1048.125,464.5,1053.125,458.5,1048.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="529" y="105.5645">Directory Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="552" y="123.1738">(gateway)</text><ellipse cx="586" cy="75.0313" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="582,63.0313,588,58.0313,586,63.0313,588,68.0313,582,63.0313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="529" y="1041.0488">Directory Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="552" y="1058.6582">(gateway)</text><ellipse cx="586" cy="1077.7344" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="582,1065.7344,588,1060.7344,586,1065.7344,588,1070.7344,582,1065.7344" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="657" y="85.6406"/><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="653" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="660" y="111.1738">Consumers</text><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="657" y="1026.5156"/><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="653" y="1030.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="660" y="1052.0488">Consumers</text><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="761" y="85.6406"/><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="757" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="764" y="111.1738">IP Cams</text><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="761" y="1026.5156"/><rect fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="757" y="1030.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="764" y="1052.0488">IP Cams</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="841" y="1041.0488">Client Registry</text><ellipse cx="890" cy="1060.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="878" x2="902" y1="1074.125" y2="1074.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="949" y="123.1738">Proximity Service</text><ellipse cx="1005.5" cy="92.6406" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1001.5,80.6406,1007.5,75.6406,1005.5,80.6406,1007.5,85.6406,1001.5,80.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="949" y="1041.0488">Proximity Service</text><ellipse cx="1005.5" cy="1060.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1001.5,1048.125,1007.5,1043.125,1005.5,1048.125,1007.5,1053.125,1001.5,1048.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1129.5" y="1041.0488">Client Record</text><ellipse cx="1175.5" cy="1060.125" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1163.5" x2="1187.5" y1="1074.125" y2="1074.125"/><polygon fill="#A80036" points="394,154.6016,404,158.6016,394,162.6016,398,158.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="400" y1="158.6016" y2="158.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="216.5" y="153.7451">invoke()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="406" y="182.7832">Priority Algorithm</text><ellipse cx="462.5" cy="152.25" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="597,214.2109,587,218.2109,597,222.2109,593,218.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="591" x2="699" y1="218.2109" y2="218.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="603" y="213.3545">register(profile)</text><polygon fill="#A80036" points="597,244.5625,587,248.5625,597,252.5625,593,248.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="591" x2="793" y1="248.5625" y2="248.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="603" y="243.7061">register(profile)</text><polygon fill="#A80036" points="829,274.9141,839,278.9141,829,282.9141,833,278.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="586" x2="835" y1="278.9141" y2="278.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="593" y="274.0576">maintain()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="841" y="303.0957">Client Registry</text><ellipse cx="890" cy="272.5625" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="878" x2="902" y1="286.5625" y2="286.5625"/><polygon fill="#A80036" points="1117.5,334.5234,1127.5,338.5234,1117.5,342.5234,1121.5,338.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1005.5" x2="1123.5" y1="338.5234" y2="338.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1012.5" y="333.667">create()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1129.5" y="362.7051">Client Record</text><ellipse cx="1175.5" cy="332.1719" fill="#FEFECE" filter="url(#f1ilcb5591d1hn)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1163.5" x2="1187.5" y1="346.1719" y2="346.1719"/><polygon fill="#A80036" points="805,394.1328,795,398.1328,805,402.1328,801,398.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="799" x2="1004.5" y1="398.1328" y2="398.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="811" y="393.2764">ping()</text><polygon fill="#A80036" points="993.5,424.4844,1003.5,428.4844,993.5,432.4844,997.5,428.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="794" x2="999.5" y1="428.4844" y2="428.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="801" y="423.6279">echo()</text><polygon fill="#A80036" points="1163.5,454.8359,1173.5,458.8359,1163.5,462.8359,1167.5,458.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1005.5" x2="1169.5" y1="458.8359" y2="458.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1012.5" y="453.9795">save(sourceProximity)</text><path d="M643,473.8359 L716,473.8359 L716,481.8359 L706,491.8359 L643,491.8359 L643,473.8359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="109.4063" style="stroke: #000000; stroke-width: 2.0;" width="588.5" x="643" y="473.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="658" y="488.3311">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="731" y="487.2549">[forever]</text><polygon fill="#A80036" points="711,510.5391,701,514.5391,711,518.5391,707,514.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="705" x2="1004.5" y1="514.5391" y2="514.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="717" y="509.6826">ping()</text><polygon fill="#A80036" points="993.5,540.8906,1003.5,544.8906,993.5,548.8906,997.5,544.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="700" x2="999.5" y1="544.8906" y2="544.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="707" y="540.0342">echo()</text><polygon fill="#A80036" points="1163.5,571.2422,1173.5,575.2422,1163.5,579.2422,1167.5,575.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1005.5" x2="1169.5" y1="575.2422" y2="575.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="1012.5" y="570.3857">save(consumerProximity)</text><path d="M10,597.2422 L163,597.2422 L163,605.2422 L153,615.2422 L10,615.2422 L10,597.2422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="168.4609" style="stroke: #000000; stroke-width: 2.0;" width="260" x="10" y="597.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="25" y="611.7373">record and notify</text><polygon fill="#A80036" points="90,633.9453,100,637.9453,90,641.9453,94,637.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="37.5" x2="96" y1="637.9453" y2="637.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="44.5" y="633.0889">start()</text><path d="M51,650.9453 L51,725.9453 L256,725.9453 L256,660.9453 L246,650.9453 L51,650.9453 " fill="#FBFB77" filter="url(#f1ilcb5591d1hn)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M246,650.9453 L246,660.9453 L256,660.9453 L246,650.9453 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="57" y="669.4404">This is where recoding</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="57" y="685.792">and file transfer happens</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="57" y="702.1436">(as explained in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="57" y="718.4951">1_1PrioritizationOfConsumers).</text><polygon fill="#A80036" points="90,753.7031,100,757.7031,90,761.7031,94,757.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="37.5" x2="96" y1="757.7031" y2="757.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="44.5" y="752.8467">end()</text><polygon fill="#A80036" points="878,791.0547,888,795.0547,878,799.0547,882,795.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="884" y1="795.0547" y2="795.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="216.5" y="790.1982">fetchPriority()</text><polygon fill="#A80036" points="220.5,821.4063,210.5,825.4063,220.5,829.4063,216.5,825.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="214.5" x2="889" y1="825.4063" y2="825.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="226.5" y="820.5498">return(client, priority)</text><polygon fill="#A80036" points="1163.5,851.7578,1173.5,855.7578,1163.5,859.7578,1167.5,855.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="1169.5" y1="855.7578" y2="855.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="216.5" y="850.9014">fetchProximity()</text><polygon fill="#A80036" points="220.5,882.1094,210.5,886.1094,220.5,890.1094,216.5,886.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="214.5" x2="1174.5" y1="886.1094" y2="886.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="226.5" y="881.2529">return(client, proximity)</text><polygon fill="#A80036" points="450.5,912.4609,460.5,916.4609,450.5,920.4609,454.5,916.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="456.5" y1="916.4609" y2="916.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="216.5" y="911.6045">generateOrder(client, priority, proximity)</text><polygon fill="#A80036" points="220.5,942.8125,210.5,946.8125,220.5,950.8125,216.5,946.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="214.5" x2="461.5" y1="946.8125" y2="946.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="226.5" y="941.9561">return(order)</text><path d="M139,961.8125 L212,961.8125 L212,969.8125 L202,979.8125 L139,979.8125 L139,961.8125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="618" x="139" y="961.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="154" y="976.3076">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="227" y="975.2314">[for all clients in order]</text><polygon fill="#A80036" points="688,998.5156,698,1002.5156,688,1006.5156,692,1002.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="694" y1="1002.5156" y2="1002.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="216.5" y="997.6592">transfer(mediaFile)</text><!--MD5=[e1915ac6ba06a28e12050c082bb31597]
@startuml Shortest Queue First
title Shortest Queue First

actor "User" as usr
control "Tagging UI" as tag
control "Streaming Service" as strm
create control "Priority Algorithm" as algo    
strm -> algo: invoke()
control "Directory Service\n(gateway)" as dir
collections "Consumers" as con
collections "IP Cams" as ip
con -> dir: register(profile)
ip -> dir: register(profile)
create entity "Client Registry" as reg
dir -> reg: maintain()
control "Proximity Service" as prox

create entity "Client Record" as proxrec
prox -> proxrec: create()
prox -> ip: ping()
ip - -> prox: echo()
prox -> proxrec: save(sourceProximity)
loop forever
    prox -> con: ping()
    con - -> prox: echo()
    prox -> proxrec: save(consumerProximity)
end
group record and notify
    usr -> tag: start()
    note over tag,strm
        This is where recoding
        and file transfer happens
        (as explained in 
        1_1PrioritizationOfConsumers). 
    end note
    usr -> tag: end()  
end
strm -> reg: fetchPriority()
reg - -> strm: return(client, priority)
strm -> proxrec: fetchProximity()
proxrec - -> strm: return(client, proximity)
strm -> algo: generateOrder(client, priority, proximity)
algo - -> strm: return(order)  
loop for all clients in order
    strm -> con: transfer(mediaFile)
end


@enduml

PlantUML version 1.2020.18(Thu Oct 01 01:10:44 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: IN
--></g></svg>